<div class="page page-orders">




  <!-- page header -->
  <div class="pageheader">

    <h2>{{page.title}}<span> for </span> {{ vm.user.user_company_full }}</h2>

    <div class="page-bar">

      <ul class="page-breadcrumb">
        <li>
          <a ui-sref="app.dashboard"><i class="fa fa-home"></i> {{main.title}}</a>
        </li>
        <li>
          <a ui-sref="app.orders.all">{{page.title}}</a>
        </li>
      </ul>

    </div>

  </div>
  <!-- /page header -->

  <!-- page content -->
  <div class="pagecontent">


    <!-- row -->
    <div class="row">
      <!-- col -->
      <div class="col-md-12">

        <!-- tile -->
        <section class="tile" fullscreen="isFullscreen01">

          <!-- tile header -->
          <div class="tile-header dvd dvd-btm">
            <h1 class="custom-font"><strong>Historique</strong> List</h1>
          </div>
          <!-- /tile header -->

          <!-- tile body -->
          <div class="tile-body" ng-controller="OrdersTableController as showCase">
            <div class="table-responsive-wide">
              <table datatable="ng" dt-options="showCase.dtOptions" dt-column-defs="showCase.dtColumnDefs" class="table table-striped table-hover table-custom" style="min-width: 1000px;">
              <div class="row mb-20">
                <div class="col-md-12">
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Demandes en attente');"><span ng-class="stati['WRQ']">Demandes en attente</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Demandes à traiter');"><span ng-class="stati['PEN']">Demandes à traiter</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Offre disponible');"><span ng-class="stati['OFR']">Offre disponible</span></button>
                  <button class="btn btn-sm btn-default" ng-class="stati['APV']" ng-click="showCase.setFilter('Approuvé');"><span ng-class="stati['APV']">Approuvé</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Refusé');"><span ng-class="stati['REF']">Refusé</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('In Progress');"><span ng-class="stati['INP']">In Progress</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Completed');"><span ng-class="stati['COM']">Completed</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Invoiced');"><span ng-class="stati['INV']">Invoiced</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Annulé');"><span ng-class="stati['CAN']">Annulé</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Archived');"><span ng-class="stati['ARC']">Archived</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('Backorder');"><span ng-class="stati['BOR']">BackOrder</span></button>
                  <button class="btn btn-sm btn-default" ng-click="showCase.setFilter('');"><span ng-class="stati['']">All</span></button>

                </div>
              </div>
                <thead>
                  <tr>
                    <th style="width:110px;">Created</th>
                    <th style="width:110px;">Created By</th>                  
                    <th style="width:100px;">Référence</th>
                    <th style="width:100px;">Référence interne</th>
                    <th style="width:100px;">Type</th>
                    <th>Delivery Address</th>
                    <th style="width:100px;">Status</th>
                    <th style="width:100px;">Update</th>
                    <th style="width:110px;">Update By</th>
                    <th style="width:80px;">Actions</th>
                    <th></th>
                  </tr>
                  </thead>
                  <tfoot>
                  <tr>
                    <th>Created</th>
                    <th>Created By</th>                  
                    <th>Référence</th>
                    <th>Référence interne</th>
                    <th>Type</th>
                    <th>Delivery Address</th>
                    <th>Status</th>
                    <th>Update</th>
                    <th>Update By</th>
                    <th></th>
                    <th></th>
                  </tr>
                  </tfoot>
                  <tbody>
                  <tr ng-repeat="order in showCase.orders">
                    <td>{{ order.order_created | date:"d MMM y 'at' h:mm a"}}</td>
                    <td><a ui-sref="app.pages.profile({ username: order.order_created_by_username })" >{{ order.order_created_by_first_name }} {{ order.order_created_by_last_name }}</a></td>
                    <td>{{ order.order_number }}/v{{ order.order_version }}</td>
                    <td>{{ order.reference_number }}</td>
                    <td><span ng-show="order.req_order[0]">{{ order.req_order[0] }}</span><span ng-show="!order.req_order[0]">{{ order.offer_order[0] }}</span></td>
                    <td>{{ order.delivery_address }}</td>
                    <td ng-class="stati[order.order_status]">{{ order.order_status_display }}</td>
                    <td>{{ order.order_status_change_date | date:"d MMM y 'at' h:mm a" }}</td>
                    <td><a ui-sref="app.pages.profile({ username: order.order_status_change_by_username })" >{{ order.order_status_change_by_first_name }} {{ order.order_status_change_by_last_name }}</a></td>
                    <td>
                      <a ui-sref="app.orders.order({ orderId: order.id })" class="btn btn-xs btn-default"><i class="fa fa-search"></i> View</a>
                    </td>
                    <td>{{order.order_status}}</td>
                  </tr>
                  </tbody>
              </table>
            </div>
          </div>
          <!-- /tile body -->

        </section>
        <!-- /tile -->

      </div>
      <!-- /col -->
    </div>
    <!-- /row -->
  </div>
  <!-- /page content -->




</div>
