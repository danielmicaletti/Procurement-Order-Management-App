<tabset class="tab-animation tab-container tab-wizard" justified="true" set-ng-animate="true" ng-init="steps={step1:true, step2:false, step3:false, step4:false, step5: false}">
    <tab active="steps.step1">

        <tab-heading>
          Request Item Details
          <span class="badge badge-default pull-right wizard-step">1</span>
        </tab-heading>

        <form name="step1" role="form" novalidate class="form-validation">

            <div class="row">
                <div class="form-group col-md-6" ng-repeat="(i, r) in vm.details track by $index">
                    <label for="input{{r.id}}">{{r.good_info}}: </label>
                    <input type="text" name="{{r.good_info}}" class="form-control" id="input{{r.id}}" ng-model="vm.addReq.prod_details[r.good_info]" ng-init="vm.addReq.prod_details[r.good_info]=''">
                </div>
            </div>

            <button class="btn btn-danger">Cancel</button>
            <button type="submit" ng-disabled="step1.$invalid" class="btn btn-greensea pull-right" ng-click="steps.step2=true">Next</button>

        </form>

    </tab>

    <tab active="steps.step2" disabled="step1.$invalid">

        <tab-heading>
        Delivery Address
        <span class="badge badge-default pull-right wizard-step">2</span>
        </tab-heading>

        <form name="step2" role="form" novalidate>

            <div ng-controller="PillsDemoCtrl">
            <div class="clearfix"></div>

                <h4 class="custom-font"><strong>Address </strong> for Delivery</h4>
                <tabset class="pills" type="pills" justified="true">

                    <tab ng-repeat="addr in vm.company.address_company" heading="{{addr.addr_location}}" active="addr.active">
                        <div class="row">
                            <label ng-click="toggle = !toggle" ng-model="vm.addReq.delivery_address" btn-radio="{{addr.id}}" class="btn btn-ef btn-ef-1 btn-ef-1-slategray btn-ef-1a mb-10" activate-button uncheckable><i class="fa fa-truck"></i><span ng-show="toggle">  Selected </span><span ng-hide="toggle">  Select this address </span></label>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-8 mb-0">
                                <label for="address1">Address 1: </label>
                                <p class="well">{{ addr.street_addr1 }}</p>
                            </div>
                            <div class="form-group col-md-4 mb-0">
                                <label for="address2">Address 2: </label>
                                <p class="well">{{ addr.street_addr2 }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="city">City: </label>
                                <p class="well">{{ addr.city }}</p>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="country">Country: </label>
                                <p class="well">{{ addr.country}}</p>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="post_code">Post Code: </label>
                                <p class="well">{{ addr.post_code }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-8">
                                <label for="zip">Address Notes: </label>
                                <p class="well">{{ addr.addr_notes }}</p>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="phone">Phone: </label>
                                <p class="well">{{ addr.phone_main }}</p>                        
                            </div>
                        </div>
                    </tab>

                </tabset>
            </div>
            <button type="submit" class="btn btn-default" ng-click="steps.step1=true">Previous</button>
            <button type="submit" ng-disabled="step2.$invalid" class="btn btn-greensea pull-right" ng-click="steps.step3=true">Next</button>
        </form>
    </tab>

    <tab active="steps.step3" disabled="step2.$invalid">

        <tab-heading>
        Addl. Information
        <span class="badge badge-default pull-right wizard-step">3</span>
        </tab-heading>

        <form name="step3" role="form" class="form-validation" novalidate>

            <div class="row">
                <div class="form-group col-md-4">
                    <label for="ref_num">Reference Number: </label>
                    <input type="text" name="ref_num" id="ref_num" class="form-control" ng-model="vm.addReq.order_reference"/>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label for="desc">Request Notes: </label>
                    <textarea class="form-control" rows="4" name="description" id="message" placeholder="Add a decription for your request" ng-model="vm.addReq.order_description"></textarea>
                </div>
            </div>

            <button type="submit" class="btn btn-default" ng-click="steps.step2=true">Previous</button>
            <button type="submit" ng-disabled="step3.$invalid" class="btn btn-greensea pull-right" ng-click="steps.step4=true">Next</button>

        </form>
    </tab>

    <tab active="steps.step4" disabled="step3.$invalid">

        <tab-heading>
            Request Files & Confirm
            <span class="badge badge-default pull-right wizard-step">4</span>
        </tab-heading>

        <form name="step4" role="form" novalidate>

            <h4 class="custom-font"><strong>Request</strong> Information</h4>
            <div class="row">

                <div class="form-group col-md-4 mb-0">
                    <label for="pr-subject">Reference Number: </label>
                    <p>{{vm.addReq.order_reference}}</p>
                    </div>
                <div class="form-group col-md-6 mb-0">
                    <label for="pr-name">Order Notes: </label>
                    <p>{{vm.addReq.order_description}}</p>
                </div>
            </div>

            <h4 class="custom-font"><strong>Delivery</strong> Address</h4>

            <div class="row" ng-repeat="del_add in vm.company.address_company | filter:{'id':  vm.addReq.delivery_address}:true" ng-show="vm.addReq.delivery_address">
                
                <div class="form-group col-md-4 mb-0">
                    <!-- <label for="addr_loc">Location: </label> -->
                    <div class="well">
                        <p>{{ del_add.addr_location }}</p>
                        <p>{{ del_add.street_addr1 }}</p>
                        <p>{{ del_add.street_addr2 }}</p>
                        <p>{{ del_add.city }}, {{ del_add.country }} {{ del_add.post_code }}</p>
                        <p>{{ del_add.phone_main }}</p> 
                        <label for="addr_notes">Address Notes: </label>
                        <p>{{ del_add.addr_notes }}</p>
                    </div>
                </div>
<!--                 <div class="form-group col-md-4 mb-0">
                    <label for="address1">Address 1: </label>
                    <p class="well">{{ del_add.street_addr1 }}</p>
                </div>
                <div class="form-group col-md-3 mb-0">
                    <label for="address2">Address 2: </label>
                    <p class="well">{{ del_add.street_addr2 }}</p>
                </div>

                <div class="form-group col-md-3">
                    <label for="city">City: </label>
                    <p class="well">{{ del_add.city }}</p>
                </div>
                <div class="form-group col-md-3">
                    <label for="country">Country: </label>
                    <p class="well">{{ del_add.country }}</p>
                </div>
                <div class="form-group col-md-3">
                    <label for="post_code">Post Code: </label>
                    <p class="well">{{ del_add.post_code }}</p>
                </div>

                <div class="form-group col-md-8">
                    <label for="addr_notes">Address Notes: </label>
                    <p class="well">{{ del_add.addr_notes }}</p>
                </div>
                <div class="form-group col-md-3">
                    <label for="phone">Phone: </label>
                    <p class="well">{{ del_add.phone_main }}</p>                        
                </div> -->

            </div>
            <div class="row" ng-show="!vm.addReq.delivery_address">
                <div class="col-md-4">
                    <p clas="well"><em>No Delivery Address Selected</em></p>
                </div>
            </div>

            <h4 class="custom-font"><strong>Request</strong> Details</h4>

            <div class="row">

                <div class="form-group col-md-6" ng-repeat="(i, r) in vm.addReq.prod_details">
                    <label for="input{{r.id}}">{{i}}: </label>
                    <p>{{r}}</p>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a href="javascript:void(0)" ng-click="isCollapsed = !isCollapsed">
                        Add files to your request item
                        </a>
                    </h4>
                </div>
                <div collapse="isCollapsed">
                    <div class="panel-body">

                        <h4 class="custom-font"><strong>Add </strong> Files</h4>

                        <div class="row">

                            <div class="page page-full page-upload" nv-file-drop="" uploader="uploader" filters="queueLimit, customFilter">
                            
                                <div class="tbox tbox-sm">

                                    <div class="tcol w-lg bg-tr-white lt">

                                        <div class="p-15 bg-white b-r">
                                            <h4 class="custom-font text-default m-0">Select</strong> files</h4>
                                        </div>

                                        <div class="p-15">

                                            <div class="form-group">
                                                <input ui-jq="filestyle" type="file" class="filestyle" ui-options="{
                                                buttonText: 'Select files',
                                                iconName: 'fa fa-inbox'
                                                }" nv-file-select uploader="uploader" multiple>
                                            </div>   

                                            <hr class="b-0 b-b"/>                                     
                                            <div class="well text-center p-30 b-dashed b-2x" nv-file-over="" uploader="uploader">
                                                Drop files here
                                            </div>
                                       </div>
                                    </div>

                                    <div class="tcol">
                                        <div class="p-15 bg-white">
                                            <span class="pull-right">Queue length: <b class="badge bg-lightred">{{ uploader.queue.length }}</b></span>
                                            <h4 class="custom-font text-default m-0">Upload queue</h4>
                                        </div>

                                        <div class="p-15">

                                            <table class="table b-a b-solid bg-white">
                                                <thead>
                                                    <tr>
                                                        <th width="50%">Name</th>
                                                        <th ng-show="uploader.isHTML5">Size</th>
                                                        <th ng-show="uploader.isHTML5">Progress</th>
                                                        <th>Status</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="(i,item) in uploader.queue track by $index" class="text-sm">
                                                        <td><strong>{{ item.file.name }}</strong></td>
                                                        
                                                        <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                                                        <td ng-show="uploader.isHTML5">
                                                            <div class="progress progress-xs not-rounded" style="margin-top: 7px;margin-bottom: 0">
                                                            <div class="progress-bar bg-cyan" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center">
                                                            <span ng-show="item.isSuccess" class="text-success"><i class="fa fa-check"></i></span>
                                                            <span ng-show="item.isCancel" class="text-warning"><i class="fa fa-ban"></i></span>
                                                            <span ng-show="item.isError" class="text-danger"><i class="fa fa-times"></i></span>
                                                        </td>
                                                        <td nowrap>
<!--                                                             <button type="button" class="btn btn-default btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                                            <span class="fa fa-upload"></span> Upload
                                                            </button> -->
                                                            <button type="button" class="btn btn-default btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                                            <span class="fa fa-ban"></span> Cancel
                                                            </button>
                                                            <button type="button" class="btn btn-default btn-xs" ng-click="item.remove()">
                                                            <span class="fa fa-trash"></span> Remove
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <div>
                                                <p>Queue progress:</p>
                                                <div class="progress progress-sm progress-striped active bg-tr-black lt" style="">
                                                    <div class="progress-bar bg-cyan" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                                                </div>
                                                
<!--                                                 <button class="btn btn-success btn-ef btn-ef-5 btn-ef-5a" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
                                                <i class="fa fa-upload"></i> <span>Upload all</span>
                                                </button> -->
                                                <button class="btn btn-warning btn-ef btn-ef-5 btn-ef-5a" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">
                                                <i class="fa fa-ban"></i> <span>Cancel all</span>
                                                </button>
                                                <button class="btn btn-danger btn-ef btn-ef-5 btn-ef-5a" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
                                                <i class="fa fa-trash"></i> <span>Remove all</span>
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <button ng-click="toggle = !toggle" ng-model="vm.addReq.order_draft" ng-init="vm.addReq.order_draft=false" ng-change="vm.isDraft()" class="btn btn-ef btn-ef-1 btn-ef-1-slategray btn-ef-1a mb-40 mr-40 pull-right" btn-checkbox><span ng-show="toggle"><i class="after fa fa-star"></i>  Draft </span><span ng-hide="toggle"><i class="fa fa-star-o"></i>  Save request as draft </span></button>
            </div>                    
            <button type="submit" class="btn btn-default" ng-click="steps.step3=true">Previous</button>
            <button ng-disabled="step4.$invalid" class="btn btn-success pull-right" ng-click="vm.subReq()">Submit Request</button>

        </form>

    </tab>
</tabset>